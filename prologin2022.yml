# SPDX-License-Identifier: GPL-3.0-or-later
# Copyright (c) 2022 Association Prologin <association@prologin.org>

name: prologin2022
rules_type: turnbased
player_count: 2

constant:
  -
    cst_name: HAUTEUR
    cst_val: 80
    cst_comment: Nombre de lignes dans la carte
  -
    cst_name: LARGEUR
    cst_val: 80
    cst_comment: Nombre de colonnes dans la carte
  -
    cst_name: NB_TOURS
    cst_val: 400
    cst_comment: Nombre de tours à jouer avant la fin de la partie
  -
    cst_name: TAILLE_DEPART
    cst_val: 5
    cst_comment: Taille de départ d'une troupe
  -
    cst_name: TAILLE_MIN
    cst_val: 3
    cst_comment: Taille minimale qu'une troupe peut avoir avant de se disperser
  -
    cst_name: INTERVALLE_DISTRIB
    cst_val: 4
    cst_comment: Intervalle de distribution de pains par les papys
  -
    cst_name: FREQ_TUNNEL
    cst_val: 1
    cst_comment: Nombre de tunnels qu'un joueur peut creuser par tour
  -
    cst_name: PTS_MOUVEMENTS
    cst_val: 20
    cst_comment: Nombre de déplacements que peut faire une troupe en un tour
  -
    cst_name: COUT_CROISSANCE
    cst_val: 10
    cst_comment: Nombre de points de mouvement recquis pour incrémenter la taille
  -
    cst_name: COUT_BUISSON
    cst_val: 3
    cst_comment: Coût en pains de la pose de buisson
  -
    cst_name: TOUR_FERMETURE
    cst_val: 100
    cst_comment: Tour au moment duquel les barières s'ouvrent ou se ferment

enum:
  -
    enum_name: direction
    enum_summary: "Directions possibles"
    enum_field:
      - [nord, "Sens positif pour les lignes"]
      - [sud, "Sens négatif pour les lignes"]
      - [est, "Sens positif pour les colonnes"]
      - [ouest, "Sens négatif pour les colonnes"]
      - [haut, "Sens positif pour le niveau"]
      - [bas, "Sens négatif pour le niveau"]
  -
    enum_name: type_case
    enum_summary: "Type de l'élément présent sur une case"
    enum_fields:
      - [vide, "Absence d'élément"]
      - [buisson, "Obstacle impossible à traverser"]
      - [barriere, "Élément pouvant être ouvert ou fermé. Une barrière fermée
                    est infranchissable alors qu'une barrière ouverte est
                    analogue à une case vide"]
      - [nid, "Élément traversable permettant à la troupe de déposer son
               inventaire en échange de points"]
      - [papy, "Élément traversable générant de manière périodique des miches
                de pain"]
      - [trou, "Interface entre le niveau principal est le niveau sous-terrain"]
  -
    enum_name: etat_barriere
    enum_summary: "État d'une barrière, soit ouvert, soit fermé, soit
                   non-applicable"
    enum_fields:
      - [ouverte, "La barrière est ouverte"]
      - [fermee, "La barrière est fermée"]
      - [pas_de_barrièere, "L'élément dont on requiert l'état n'est pas une
                            barrière"]
  -
    enum_name: etat_nid
    enum_summary: "Joueur auquel appartient un nid"
    enum_fields:
      - [libre, "Le nid n'a pas été attribué"]
      - [joueur_0, "Joueur 0"]
      - [joueur_1, "Joueur 1"]
      - [pas_de_nid, "L'élément dont on requiert l'état n'est pas un nid"]

struct:
  -
    str_name: position
    str_summary: Position dans la carte, donnée par trois coordonnées
    str_tuple: yes
    str_field:
      - [colonne, int, "Abscisse"]
      - [ligne, int, "Ordonnée"]
      - [niveau, int, "Niveau"]
  -
    str_name: troupe
    str_summary: Une troupe, composée de la maman canard et de ses canetons
    str_tuple: no
    str_field:
      - [maman, position, "Position de la maman canard"]
      - [canards, position array, "Position des différents canards de la troupe,
                                   incluant la maman en première position"]
      - [taille, int, "Taille de la troupe"]
      - [dir, direction, "Direction de la troupe"]

function: []

user_function:
  -
    fct_name: partie_init
    fct_summary: Fonction appelée au début de la partie.
    fct_ret_type: void
    fct_arg: []
  -
    fct_name: jouer_tour
    fct_summary: Fonction appelée à chaque tour.
    fct_ret_type: void
    fct_arg: []
  -
    fct_name: partie_fin
    fct_summary: Fonction appelée à la fin de la partie.
    fct_ret_type: void
    fct_arg: []
